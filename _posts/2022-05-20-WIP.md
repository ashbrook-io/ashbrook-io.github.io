---
layout: post
published: false
title: Creating an app to search and retrieve documents on Azure
subtitle: >-
  Famous last words: This should be easy!
date: '2022-04-25'
---

After moving all of our documents into blob storage and creating an application to search the index for these documents, I discovered some gaps in my original export. I'm going to document the process to correct that here.

#### What happened?

Well, nothing terrible. I moved everything and it all worked fine. But while testing with *another* stakeholder who wasn't engaged in the original discussion, we discovered some of the index data that was not moved, was something that they used. So I decided to go back and basically rebuild the cosmos db. Not delete the existing one, but just import a new one and update the keys and links to use the new one.

Since I'm having to do this once, I don't really want to have to fiddle with the old SQL 2008 box (R1, yuck) anymore, so I wanted to go ahead and get this database just restored into a local docker container. I could put it on Azure like I did last time, but would be nice to just dev locally.

To this end, I'll refer to this page:

https://docs.microsoft.com/en-us/sql/linux/tutorial-restore-backup-in-sql-server-container?view=sql-server-ver15

Unfortunately, after reading a little bit, I see this:

![image](https://user-images.githubusercontent.com/7390156/169074369-20b76fbd-cb01-4e52-8f28-7a2005694af0.png)

I'm not a docker expert, so let's go ahead and open up docker and maybe do some updates, etc.:

Updates!

![image](https://user-images.githubusercontent.com/7390156/169074269-c0f75b76-ca91-4ba1-8ed8-aaccebe3a0e9.png)


do it!

![image](https://user-images.githubusercontent.com/7390156/169085945-0c48d8e6-1b6d-49e1-9a9c-2537ecd85184.png)

hmmm... well.... i guess we'll see?

<img width="240" alt="image" src="https://user-images.githubusercontent.com/7390156/169088699-cd2090ed-ad2b-497c-a328-044c2a916f80.png">

so, instead i did a brew upgrade docker.... ? No daemon running... ok, so reinstalling we go. =) I'm leaving this in because I like to record how many silly things you run into when you want to do some 'simple' thing.

![image](https://user-images.githubusercontent.com/7390156/169121688-95b67505-a0da-437a-8535-02d46fadc1da.png)

So now that docker is up and running and seemly all patched, let's... mount a volume or something so we can restore from backup. First will start copying this file from the server:

![image](https://user-images.githubusercontent.com/7390156/169122141-522fbac3-896f-4da2-95db-9c194fe6c087.png)


noooo...... why so slow. my connection is good and it's only 80GB. not the tiniest thing in the world, but not that big. 1.5MB/s i believe is what that works out to....

ah well, that's what's up I suppose, so we'll just see how it goes for now.




